# view

`view` — маленький просмотрщик JPEG на C.

Программа:
- проверяет сигнатуру файла и тип (сейчас поддерживается только JPEG);
- парсит JPEG-маркеры и читает метаданные (ширина, высота, компоненты, precision);
- декодирует JPEG в RGB через `libjpeg`;
- открывает окно через `SDL2` и показывает изображение с сохранением пропорций при ресайзе.

Поведение режимов:
- без `--info`: декодирование и открытие окна;
- с `--info`: только вывод информации в терминал, без открытия окна;
- с `--force-jpeg`: проверка типа по сигнатуре пропускается, вход принудительно обрабатывается как JPEG.

## Зависимости

- `gcc`
- `pkg-config`
- `SDL2` (dev-пакет)
- `libjpeg` (dev-пакет)

## Сборка

```bash
mkdir -p bin
gcc -Isrc/include -std=c11 -Wall -Wextra src/source/*.c -o bin/view $(pkg-config --cflags --libs sdl2 libjpeg)
```

## Запуск

```bash
./bin/view [--verbose] [--info] [--force-jpeg] <image_file>
```

Примеры:

```bash
./bin/view data/fall_wallpaper.jpg
./bin/view --info data/photo_2025-01-27_18-30-30.jpg
./bin/view --verbose --info data/fall_wallpaper.jpg
./bin/view --force-jpeg data/some_random_file.bin
```

## Опции

- `-h, --help` — показать справку
- `-v, --verbose` — печатать подробный лог парсинга JPEG
- `-i, --info` — вывести информацию о файле (размер, сигнатура, права, владелец, time-метки) и JPEG-параметры; окно не открывается
- `-f, --force-jpeg` — игнорировать проверку типа по сигнатуре и пытаться обработать вход как JPEG (даже если парсер JPEG вернул ошибку, программа попробует декодирование через `libjpeg`)

## Ограничения (текущее состояние)

- поддерживается только JPEG;
- для неподдерживаемых форматов:
  - без `--force-jpeg` программа завершится после проверки типа;
  - с `--force-jpeg` программа попытается декодировать как JPEG и завершится с ошибкой, если поток невалидный;
- выход из окна: `Esc` или кнопка закрытия.
